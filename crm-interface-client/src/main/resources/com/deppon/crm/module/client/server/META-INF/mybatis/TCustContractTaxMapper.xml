<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.deppon.crm.module.client.sync.dao.impl.TCustContractTaxMapper" >

  <resultMap id="BaseResultMap" type="com.deppon.crm.module.client.sync.domain.dto.TCustContractTaxOperation" >
    <!--
     WARNING - @coco
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="FID" property="fid" jdbcType="DECIMAL" />
    <result column="FCREATETIME" property="fcreatetime" jdbcType="TIMESTAMP" />
    <result column="FCREATEUSERID" property="fcreateuserid" jdbcType="DECIMAL" />
    <result column="FLASTUPDATETIME" property="flastupdatetime" jdbcType="TIMESTAMP" />
    <result column="FLASTMODIFYUSERID" property="flastmodifyuserid" jdbcType="DECIMAL" />
    <result column="FCONTRACTID" property="fcontractid" jdbcType="DECIMAL" />
    <result column="FBEGINTIME" property="fbegintime" jdbcType="TIMESTAMP" />
    <result column="FENDTIME" property="fendtime" jdbcType="TIMESTAMP" />
    <result column="FINVOICETYPE" property="finvoiceType" jdbcType="VARCHAR" />
    <result column="SIGNCOMPANY" property="signCompany" jdbcType="VARCHAR" />
  </resultMap>
    <sql id="Base_Column_List" >
    <!--
      WARNING - @coco
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    T_CUST_CONTRACTTAX.FID, T_CUST_CONTRACTTAX.FCREATETIME, T_CUST_CONTRACTTAX.FCREATEUSERID, 
    T_CUST_CONTRACTTAX.FLASTUPDATETIME, T_CUST_CONTRACTTAX.FLASTMODIFYUSERID, T_CUST_CONTRACTTAX.FCONTRACTID, 
    T_CUST_CONTRACTTAX.FINVOICETYPE, T_CUST_CONTRACTTAX.SIGNCOMPANY,T_CUST_CONTRACTTAX.FBEGINTIME,T_CUST_CONTRACTTAX.fendtime
  </sql>
  <!-- 根据主键，检索该合同-合同标记子公司关系的所属的客户 -->
  <select id="searchCustomerInfo" resultMap="com.deppon.crm.module.client.sync.dao.impl.TCustCustbasedataMapper.BaseResultMap" parameterType="java.lang.String" >
    select 
	<include refid="com.deppon.crm.module.client.sync.dao.impl.TCustCustbasedataMapper.Base_Column_List" />
	,t_org_department.fstandardcode as fdeptidStandardcode
	from t_cust_custbasedata
	join t_cust_contract 
		on t_cust_custbasedata.fid = t_cust_contract.fcustid
	join  t_cust_contractTax 
		on t_cust_contract.fid = t_cust_contractTax.fcontractid
    join t_org_department on t_org_department.fid = T_CUST_CUSTBASEDATA.Fdeptid
	where t_cust_contractTax.fid = #{fid,jdbcType=DECIMAL}
  </select>
  
    <!-- 根据合同Id检索全部的合同-合同发票标记子公司关系对应信息 -->
  <select id="selectByContractId" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from T_CUST_CONTRACTTAX
    where fcontractid = #{fcontractid, jdbcType=DECIMAL}
  </select>
</mapper>